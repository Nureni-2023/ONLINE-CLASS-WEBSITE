<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ - Ø¹Ù„Ù… Ø§Ù„ÙØ±Ø§Ø¦Ø¶</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <style>
    body {
      font-family: 'Cairo', sans-serif;
      margin: 0;
      background: #f2f2f2;
      color: #333;
      padding-bottom: 50px;
    }

    header {
      background: #0a3d62;
      color: white;
      text-align: center;
      padding: 20px;
      position: relative;
    }

    .lang-switch {
      position: absolute;
      top: 10px;
      left: 20px;
    }

    .lang-switch button {
      background: transparent;
      border: none;
      color: white;
      font-size: 22px;
      cursor: pointer;
    }

    section {
      margin: 20px;
      padding: 15px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    h3 {
      margin-top: 0;
      color: #0a3d62;
    }

    textarea, input {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    button {
      padding: 10px 20px;
      margin-top: 10px;
      background: #0a3d62;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    iframe {
      width: 100%;
      height: 250px;
      border: none;
      border-radius: 8px;
      margin-top: 10px;
    }

    footer {
      text-align: center;
      padding: 15px;
      background: #0a3d62;
      color: white;
      position: fixed;
      bottom: 0;
      width: 100%;
    }

    @media (max-width: 600px) {
      iframe {
        height: 200px;
      }
    }
  </style>
</head>
<body>

  <!-- ğŸ”µ Header -->
  <header>
    <div class="lang-switch">
      <button onclick="toggleLang()" title="Switch Language"><i class="fas fa-globe"></i></button>
    </div>
    <h1 id="studentHeader">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨</h1>
    <p id="studentSubheader">Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ… Ø¹Ù„Ù… Ø§Ù„ÙØ±Ø§Ø¦Ø¶</p>
  </header>

  <!-- ğŸ“¢ Broadcast Message -->
  <section>
    <h3 id="broadcastHeader">ğŸ“¢ Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
    <p id="broadcastText">...</p>
  </section>

  <!-- ğŸ’Œ Private Message -->
  <section>
    <h3 id="privateHeader">ğŸ’Œ Ø±Ø³Ø§Ù„ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©</h3>
    <p id="privateText">...</p>
  </section>

  <!-- ğŸ¥ Video Lessons -->
  <section id="videoLibrarySection">
    <h3 id="videoLibraryTitle">ğŸ¥ Ø¯Ø±ÙˆØ³ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</h3>
    <div id="videoLibraryContainer" style="display: flex; flex-direction: column; gap: 20px;"></div>
  </section>

  <!-- ğŸ“¨ Message to Admin -->
  <section>
    <h3 id="studentMsgTitle">ğŸ“¨ Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±Ù</h3>
    <form onsubmit="sendMessageToAdmin(event)">
      <textarea id="studentMsg" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..." rows="4"></textarea>
      <button type="submit">ğŸ“© Ø¥Ø±Ø³Ø§Ù„</button>
    </form>
  </section>

  <!-- ğŸ”» Footer -->
  <footer id="footerText">
    &copy; 2025 Ø¨ÙˆØ§Ø¨Ø© Ø¹Ù„Ù… Ø§Ù„ÙØ±Ø§Ø¦Ø¶
  </footer>

  <!-- âœ… Script -->
  <script>
    let isArabic = true;

    function toggleLang() {
      isArabic = !isArabic;
      document.documentElement.lang = isArabic ? 'ar' : 'en';
      document.documentElement.dir = isArabic ? 'rtl' : 'ltr';

      document.getElementById("studentHeader").textContent = isArabic ? "Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨" : "Student Portal";
      document.getElementById("studentSubheader").textContent = isArabic ? "Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ… Ø¹Ù„Ù… Ø§Ù„ÙØ±Ø§Ø¦Ø¶" : "Welcome to Ilm al-Fara'id Learning Platform";

      document.getElementById("broadcastHeader").textContent = isArabic ? "ğŸ“¢ Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©" : "ğŸ“¢ Message from Admin";
      document.getElementById("privateHeader").textContent = isArabic ? "ğŸ’Œ Ø±Ø³Ø§Ù„ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©" : "ğŸ’Œ Your Private Message";
      document.getElementById("videoLibraryTitle").textContent = isArabic ? "ğŸ¥ Ø¯Ø±ÙˆØ³ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ" : "ğŸ¥ Video Lessons";
      document.getElementById("studentMsgTitle").textContent = isArabic ? "ğŸ“¨ Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±Ù" : "ğŸ“¨ Send Message to Admin";
      document.getElementById("studentMsg").placeholder = isArabic ? "Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..." : "Write your message...";
      document.querySelector("form button").textContent = isArabic ? "ğŸ“© Ø¥Ø±Ø³Ø§Ù„" : "ğŸ“© Send";
      document.getElementById("footerText").innerHTML = isArabic ? "&copy; 2025 Ø¨ÙˆØ§Ø¨Ø© Ø¹Ù„Ù… Ø§Ù„ÙØ±Ø§Ø¦Ø¶" : "&copy; 2025 Ilm al-Fara'id Portal";

      renderStudentVideos();
      loadMessages();
    }

    function loadMessages() {
      const email = localStorage.getItem("loggedInStudentEmail") || "student@example.com";

      const broadcast = localStorage.getItem("broadcastMessage");
      document.getElementById("broadcastText").textContent = broadcast || (isArabic ? "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ù„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹." : "No message currently.");

      const privateMsg = localStorage.getItem(`msg_${email}`);
      document.getElementById("privateText").textContent = privateMsg || (isArabic ? "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ©." : "No private message.");
    }

    function renderStudentVideos() {
      const container = document.getElementById("videoLibraryContainer");
      container.innerHTML = "";

      const videos = JSON.parse(localStorage.getItem("videoLibrary") || "[]");

      if (videos.length === 0) {
        container.innerHTML = `<p>${isArabic ? "Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹." : "No videos available yet."}</p>`;
        return;
      }

      videos.forEach(vid => {
        const box = document.createElement("div");
        box.style.border = "1px solid #ccc";
        box.style.padding = "10px";
        box.style.borderRadius = "8px";
        box.style.background = "#fff";
        box.innerHTML = `
          <h4>${vid.title}</h4>
          <iframe src="${vid.embed}" allowfullscreen></iframe>
          <p><a href="${vid.download}" target="_blank">ğŸ“¥ ${isArabic ? "ØªØ­Ù…ÙŠÙ„" : "Download"}</a></p>
        `;
        container.appendChild(box);
      });
    }

    function sendMessageToAdmin(event) {
      event.preventDefault();
      const msg = document.getElementById("studentMsg").value.trim();
      const email = localStorage.getItem("loggedInStudentEmail") || "student@example.com";

      if (!msg) {
        alert(isArabic ? "ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©." : "Please write your message.");
        return;
      }

      localStorage.setItem(`from_${email}`, msg);
      document.getElementById("studentMsg").value = "";
      alert(isArabic ? "ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±Ù." : "Your message has been sent to the admin.");
    }

    // Auto-load on page ready
    window.onload = () => {
      loadMessages();
      renderStudentVideos();
    }
  </script>
</body>
</html>
